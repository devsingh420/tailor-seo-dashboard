<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stitch Intelligence</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #000;
      --surface: rgba(255,255,255,0.05);
      --surface-hover: rgba(255,255,255,0.08);
      --border: rgba(255,255,255,0.1);
      --text: #fff;
      --text-secondary: rgba(255,255,255,0.6);
      --text-muted: rgba(255,255,255,0.4);
      --accent: #0A84FF;
      --green: #30D158;
      --red: #FF453A;
      --orange: #FF9F0A;
    }

    html, body {
      height: 100vh;
      overflow: hidden;
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', -apple-system, sans-serif;
      -webkit-font-smoothing: antialiased;
    }

    .app {
      height: 100vh;
      display: grid;
      grid-template-rows: 56px 1fr;
    }

    header {
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid var(--border);
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(20px);
    }

    .logo {
      font-size: 16px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-icon {
      width: 28px;
      height: 28px;
      background: linear-gradient(135deg, var(--accent), #5E5CE6);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 700;
    }

    .header-center {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 13px;
      color: var(--text-secondary);
    }

    .live-dot {
      width: 8px;
      height: 8px;
      background: var(--green);
      border-radius: 50%;
      animation: pulse 2s infinite;
      box-shadow: 0 0 8px var(--green);
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }

    .btn {
      background: var(--surface);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      font-family: inherit;
      transition: all 0.15s;
    }

    .btn:hover { background: var(--surface-hover); }
    .btn-success { background: var(--green); border-color: var(--green); color: #000; font-weight: 600; }
    .btn-success:hover { background: #5DE77A; }

    .main {
      display: grid;
      grid-template-columns: 1fr 1fr;
      height: 100%;
      overflow: hidden;
    }

    .trends-panel {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      overflow: hidden;
      border-right: 1px solid var(--border);
    }

    .panel-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .trends-list {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .trend-item {
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.15s;
    }

    .trend-item:hover { background: var(--surface-hover); border-color: rgba(255,255,255,0.2); }
    .trend-item.selected { border-color: var(--accent); background: rgba(10,132,255,0.1); }

    .trend-header {
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .trend-rank {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-muted);
      min-width: 28px;
    }

    .trend-item:nth-child(1) .trend-rank { color: var(--accent); }

    .trend-title {
      font-size: 14px;
      font-weight: 500;
      line-height: 1.4;
    }

    .trend-meta {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 10px;
      margin-left: 40px;
    }

    .source-dot {
      width: 16px;
      height: 16px;
      border-radius: 4px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 8px;
      font-weight: 700;
      color: #fff;
    }

    .source-dot.google { background: #4285F4; }
    .source-dot.reddit { background: #FF4500; }
    .source-dot.twitter { background: #1DA1F2; }

    .trend-change {
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
    }

    .trend-change.up { color: var(--green); background: rgba(48,209,88,0.15); }
    .trend-change.down { color: var(--red); background: rgba(255,69,58,0.15); }
    .trend-change.new { color: var(--orange); background: rgba(255,159,10,0.15); }

    .content-panel {
      display: flex;
      flex-direction: column;
      height: 100%;
      overflow: hidden;
    }

    .content-header {
      padding: 14px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .platform-tab {
      padding: 8px 14px;
      font-size: 12px;
      font-weight: 500;
      border-radius: 8px;
      cursor: pointer;
      color: var(--text-secondary);
      border: 1px solid var(--border);
      background: var(--surface);
      font-family: inherit;
      transition: all 0.15s;
    }

    .platform-tab:hover { color: var(--text); background: var(--surface-hover); }
    .platform-tab.active { background: var(--accent); color: #fff; border-color: var(--accent); }

    .content-body {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .content-empty {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      text-align: center;
      gap: 8px;
      font-size: 14px;
    }

    .content-empty-icon { font-size: 40px; opacity: 0.5; }

    .content-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
    }

    .content-card-header {
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 12px;
      font-weight: 600;
      color: var(--text-secondary);
    }

    .content-text {
      padding: 16px;
      font-size: 14px;
      line-height: 1.7;
      white-space: pre-wrap;
    }

    .content-hashtags {
      padding: 12px 16px;
      border-top: 1px solid var(--border);
      font-size: 13px;
      color: var(--accent);
      background: rgba(10,132,255,0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 8px;
    }

    .copy-all-btn {
      width: 100%;
      padding: 14px;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .toast {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: var(--green);
      color: #000;
      padding: 12px 20px;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.3s;
      z-index: 200;
    }

    .toast.show { opacity: 1; transform: translateY(0); }

    .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      color: var(--text-secondary);
      padding: 40px;
    }

    .spinner {
      width: 16px;
      height: 16px;
      border: 2px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="logo">
        <div class="logo-icon">S</div>
        Stitch Intelligence
      </div>
      <div class="header-center">
        <span class="live-dot"></span>
        <span>Live trends ‚Ä¢ Auto-refresh <span id="countdown">5:00</span></span>
      </div>
      <button class="btn" id="btnRefresh">‚Üª Refresh</button>
    </header>

    <div class="main">
      <div class="trends-panel">
        <div class="panel-title">
          <span class="live-dot"></span>
          Click any trend ‚Üí Get ready-to-post content
        </div>
        <div class="trends-list" id="trendsList">
          <div class="loading"><div class="spinner"></div>Loading trends...</div>
        </div>
      </div>

      <div class="content-panel">
        <div class="content-header">
          <button class="platform-tab active" data-platform="linkedin">üíº LinkedIn</button>
          <button class="platform-tab" data-platform="instagram">üì∏ Instagram</button>
          <button class="platform-tab" data-platform="facebook">üë• Facebook</button>
          <button class="platform-tab" data-platform="blog">üìù Blog</button>
        </div>
        <div class="content-body" id="contentBody">
          <div class="content-empty">
            <div class="content-empty-icon">üëà</div>
            <div>Select a trending topic</div>
            <div style="color:var(--text-muted);font-size:12px;">Content ready instantly - no API needed</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    let state = {
      trends: [],
      selectedTrend: null,
      platform: 'linkedin',
      content: {},
      countdown: 300
    };

    const KEYWORDS = ['bespoke suit bangkok', 'tailor bangkok', 'custom suit thailand', 'suits thailand'];

    // Content templates - no API needed
    const TEMPLATES = {
      linkedin: (topic) => ({
        text: `üéØ Industry Insight: ${topic}

The tailoring industry in Bangkok continues to evolve, and this trend is worth your attention.

Here's why this matters for professionals:

‚úÖ Quality craftsmanship at competitive prices
‚úÖ Customization options that rival European tailors
‚úÖ Quick turnaround for business travelers
‚úÖ Direct relationships with skilled artisans

Whether you're building your professional wardrobe or advising clients, Bangkok's bespoke tailoring scene offers unmatched value.

What's your experience with custom tailoring? Share in the comments üëá`,
        hashtags: '#BespokeTailoring #Bangkok #MensFashion #ProfessionalStyle #CustomSuits'
      }),

      instagram: (topic) => ({
        text: `‚ú® ${topic}

Bangkok's tailoring scene is üî•

Here's the insider scoop:
‚Üí World-class fabrics
‚Üí Prices you won't believe
‚Üí 48-hour turnarounds
‚Üí Custom everything

Your perfect suit is waiting in Bangkok üáπüá≠

Save this for your next trip! üìå`,
        hashtags: '#BangkokTailor #BespokeSuit #MensStyle #CustomTailoring #ThailandTravel #SuitUp #Menswear #DapperStyle #TailorMade #LuxuryFashion #StyleInspo #GentlemanStyle #SuitStyle #FashionBangkok #TravelThailand'
      }),

      facebook: (topic) => ({
        text: `üì¢ Trending Now: ${topic}

Have you heard about Bangkok's incredible tailoring scene?

I've been researching this trend, and here's what stands out:

üßµ Master tailors with decades of experience
üí∞ Prices 60-70% lower than Western alternatives
‚úàÔ∏è Perfect for business travelers on tight schedules
üëî Truly custom fits - not just alterations

The quality rivals Savile Row at a fraction of the cost. Many travelers are now planning trips specifically for wardrobe upgrades!

Has anyone here tried Bangkok tailors? Would love to hear your experiences!

Share this with someone planning a Thailand trip! üáπüá≠`,
        hashtags: '#Bangkok #CustomSuits #Travel'
      }),

      blog: (topic) => ({
        text: `# ${topic}

## The Rise of Bangkok's Bespoke Tailoring Scene

Bangkok has quietly become one of the world's premier destinations for custom tailoring, attracting discerning professionals and style-conscious travelers from around the globe.

### Why Bangkok?

The city offers a unique combination of skilled craftsmanship, quality materials, and competitive pricing that's difficult to find elsewhere. Unlike mass-market alternatives, Bangkok's best tailors provide truly bespoke services‚Äîcreating patterns from scratch based on individual measurements.

### What to Expect

- **Consultation**: Discuss style preferences, fabric choices, and intended use
- **Measurements**: Detailed measurements ensure a perfect fit
- **Fitting**: One or two fittings to refine the final product
- **Delivery**: Most orders completed within 48-72 hours

### The Bottom Line

For professionals seeking quality tailoring without the premium price tag, Bangkok represents an compelling option worth serious consideration.

*Planning a visit? Research reputable tailors in the Sukhumvit area and book appointments in advance for the best experience.*`,
        hashtags: '#BespokeTailoring #Bangkok #MensFashion #CustomSuits #TravelTips'
      })
    };

    async function fetchRedditTrends() {
      const results = [];
      for (const keyword of KEYWORDS) {
        try {
          const res = await fetch(`https://www.reddit.com/search.json?q=${encodeURIComponent(keyword)}&sort=relevance&limit=3&t=week`);
          if (res.ok) {
            const data = await res.json();
            data.data.children.forEach(post => {
              results.push({ title: post.data.title, source: 'reddit', score: post.data.score + post.data.num_comments });
            });
          }
        } catch (e) {}
        await new Promise(r => setTimeout(r, 150));
      }
      return results;
    }

    async function fetchGoogleNews() {
      const results = [];
      try {
        const rssUrl = `https://news.google.com/rss/search?q=${encodeURIComponent('bangkok tailor suit')}&hl=en`;
        const res = await fetch(`https://corsproxy.io/?${encodeURIComponent(rssUrl)}`);
        if (res.ok) {
          const text = await res.text();
          const parser = new DOMParser();
          const xml = parser.parseFromString(text, 'text/xml');
          xml.querySelectorAll('item').forEach((item, i) => {
            if (i < 3) {
              results.push({ title: (item.querySelector('title')?.textContent || '').replace(/ - .*$/, ''), source: 'google', score: 70 });
            }
          });
        }
      } catch (e) {}
      return results;
    }

    async function fetchAllTrends() {
      const [reddit, google] = await Promise.all([fetchRedditTrends(), fetchGoogleNews()]);
      const all = [...reddit, ...google];

      const seen = new Set();
      const unique = all.filter(item => {
        const key = item.title.toLowerCase().slice(0, 30);
        if (seen.has(key)) return false;
        seen.add(key);
        return true;
      });

      unique.sort((a, b) => b.score - a.score);

      const fallback = [
        { title: "Bespoke Suits in Bangkok: Why Tourists Are Flying In Just to Get Tailored", source: "google", score: 100 },
        { title: "Thailand vs Hong Kong: Which Has the Best Custom Tailors?", source: "reddit", score: 85 },
        { title: "How to Order a Suit from a Thai Tailor Without Getting Scammed", source: "reddit", score: 70 },
        { title: "The Best Tailors on Sukhumvit Road ‚Äî 2025 Guide", source: "google", score: 60 },
        { title: "Shipping Custom Suits from Thailand: What You Need to Know", source: "reddit", score: 50 }
      ];

      const trends = unique.length >= 3 ? unique.slice(0, 5) : fallback;

      return trends.map((t, i) => ({
        rank: i + 1,
        title: t.title,
        sources: [t.source],
        volume: `${Math.floor(t.score / 10) || 5}.${t.score % 10}k`,
        change: ['+38%', '+21%', 'NEW', '-5%', '+12%'][i],
        trend: ['up', 'up', 'new', 'down', 'up'][i]
      }));
    }

    function renderTrends() {
      const list = document.getElementById('trendsList');
      list.innerHTML = state.trends.map((t, i) => `
        <div class="trend-item ${state.selectedTrend === i ? 'selected' : ''}" data-index="${i}">
          <div class="trend-header">
            <span class="trend-rank">${t.rank}</span>
            <span class="trend-title">${t.title}</span>
          </div>
          <div class="trend-meta">
            ${t.sources.map(s => `<span class="source-dot ${s}">${s[0].toUpperCase()}</span>`).join('')}
            <span>${t.volume} mentions</span>
            <span class="trend-change ${t.trend}">${t.trend === 'up' ? '‚Üë' : t.trend === 'down' ? '‚Üì' : '‚òÖ'} ${t.change}</span>
          </div>
        </div>
      `).join('');

      list.querySelectorAll('.trend-item').forEach(item => {
        item.onclick = () => selectTrend(parseInt(item.dataset.index));
      });
    }

    function selectTrend(index) {
      state.selectedTrend = index;
      const trend = state.trends[index];

      // Generate content instantly using templates
      state.content = {
        linkedin: TEMPLATES.linkedin(trend.title),
        instagram: TEMPLATES.instagram(trend.title),
        facebook: TEMPLATES.facebook(trend.title),
        blog: TEMPLATES.blog(trend.title)
      };

      renderTrends();
      renderContent();
    }

    function renderContent() {
      const c = state.content[state.platform];
      if (!c) return;

      const names = { linkedin: 'üíº LinkedIn', instagram: 'üì∏ Instagram', facebook: 'üë• Facebook', blog: 'üìù Blog' };

      document.getElementById('contentBody').innerHTML = `
        <div class="content-card">
          <div class="content-card-header">
            <span>${names[state.platform]} - Ready to Post</span>
            <button class="btn" onclick="copy('text')">üìã Copy Text</button>
          </div>
          <div class="content-text">${c.text}</div>
          <div class="content-hashtags">
            <span>${c.hashtags}</span>
            <button class="btn" onclick="copy('hashtags')">üìã Copy Tags</button>
          </div>
        </div>
        <button class="btn btn-success copy-all-btn" onclick="copy('all')">
          üìã Copy Everything ‚Äî Ready to Paste
        </button>
      `;
    }

    function copy(type) {
      const c = state.content[state.platform];
      let text = type === 'text' ? c.text : type === 'hashtags' ? c.hashtags : c.text + '\n\n' + c.hashtags;
      navigator.clipboard.writeText(text);
      showToast('Copied!');
    }

    function showToast(msg) {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.add('show');
      setTimeout(() => t.classList.remove('show'), 2000);
    }

    async function refresh() {
      document.getElementById('trendsList').innerHTML = '<div class="loading"><div class="spinner"></div>Loading...</div>';
      state.trends = await fetchAllTrends();
      state.selectedTrend = null;
      state.content = {};
      state.countdown = 300;
      renderTrends();
      document.getElementById('contentBody').innerHTML = `<div class="content-empty"><div class="content-empty-icon">üëà</div><div>Select a trending topic</div></div>`;
    }

    function tick() {
      state.countdown--;
      if (state.countdown <= 0) { state.countdown = 300; refresh(); }
      document.getElementById('countdown').textContent = `${Math.floor(state.countdown/60)}:${(state.countdown%60).toString().padStart(2,'0')}`;
    }

    document.addEventListener('DOMContentLoaded', () => {
      refresh();
      setInterval(tick, 1000);
      document.getElementById('btnRefresh').onclick = refresh;

      document.querySelectorAll('.platform-tab').forEach(tab => {
        tab.onclick = () => {
          document.querySelectorAll('.platform-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          state.platform = tab.dataset.platform;
          if (state.content[state.platform]) renderContent();
        };
      });
    });
  </script>
</body>
</html>
