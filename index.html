<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stitch Intelligence - Content Studio</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #0a0a0a;
      --surface: rgba(255,255,255,0.04);
      --surface-hover: rgba(255,255,255,0.08);
      --border: rgba(255,255,255,0.1);
      --text: #fff;
      --text-secondary: rgba(255,255,255,0.6);
      --text-muted: rgba(255,255,255,0.35);
      --accent: #0A84FF;
      --gold: #C9A962;
      --green: #30D158;
    }

    html, body {
      height: 100vh;
      overflow: hidden;
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', -apple-system, sans-serif;
      -webkit-font-smoothing: antialiased;
    }

    .app {
      height: 100vh;
      display: grid;
      grid-template-rows: auto 1fr;
    }

    header {
      padding: 16px 24px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-mark {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--gold), #E8D5A3);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 18px;
      color: #000;
    }

    .logo-text {
      font-size: 18px;
      font-weight: 600;
    }

    .logo-text span { color: var(--gold); }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .status-badge {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: rgba(48,209,88,0.15);
      border-radius: 20px;
      font-size: 12px;
      color: var(--green);
      font-weight: 500;
    }

    .status-dot {
      width: 6px;
      height: 6px;
      background: var(--green);
      border-radius: 50%;
    }

    .btn {
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text);
      font-family: inherit;
      transition: all 0.15s;
    }

    .btn:hover { background: var(--surface-hover); }
    .btn-gold { background: var(--gold); color: #000; border-color: var(--gold); font-weight: 600; }
    .btn-gold:hover { background: #D4B876; }

    .main {
      display: grid;
      grid-template-columns: 380px 1fr;
      overflow: hidden;
    }

    .sidebar {
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .sidebar-header {
      padding: 16px;
      border-bottom: 1px solid var(--border);
    }

    .sidebar-title {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .category-tabs {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .cat-tab {
      padding: 6px 10px;
      font-size: 11px;
      font-weight: 500;
      border-radius: 6px;
      cursor: pointer;
      background: var(--surface);
      color: var(--text-secondary);
      border: 1px solid transparent;
      font-family: inherit;
      transition: all 0.15s;
    }

    .cat-tab:hover { color: var(--text); }
    .cat-tab.active { background: var(--gold); color: #000; }

    .topics-list {
      flex: 1;
      overflow-y: auto;
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .topic-card {
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: 10px;
      padding: 14px;
      cursor: pointer;
      transition: all 0.15s;
    }

    .topic-card:hover { background: var(--surface-hover); border-color: rgba(255,255,255,0.2); }
    .topic-card.selected { border-color: var(--gold); background: rgba(201,169,98,0.1); }

    .topic-category {
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--gold);
      margin-bottom: 6px;
    }

    .topic-title {
      font-size: 13px;
      font-weight: 500;
      line-height: 1.4;
      margin-bottom: 8px;
    }

    .topic-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .topic-source {
      padding: 2px 6px;
      background: var(--surface);
      border-radius: 4px;
      font-weight: 500;
    }

    .content-panel {
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .content-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .platform-tabs {
      display: flex;
      gap: 6px;
    }

    .platform-tab {
      padding: 8px 14px;
      font-size: 12px;
      font-weight: 500;
      border-radius: 8px;
      cursor: pointer;
      background: var(--surface);
      color: var(--text-secondary);
      border: 1px solid var(--border);
      font-family: inherit;
      transition: all 0.15s;
    }

    .platform-tab:hover { color: var(--text); }
    .platform-tab.active { background: var(--gold); color: #000; border-color: var(--gold); }

    .content-body {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }

    .empty-state {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text-muted);
    }

    .empty-icon { font-size: 48px; margin-bottom: 16px; opacity: 0.4; }
    .empty-text { font-size: 14px; color: var(--text-secondary); margin-bottom: 4px; }
    .empty-hint { font-size: 12px; }

    .content-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin-bottom: 16px;
      overflow: hidden;
    }

    .content-card-header {
      padding: 12px 16px;
      background: rgba(255,255,255,0.02);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .card-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
    }

    .content-text {
      padding: 20px;
      font-size: 14px;
      line-height: 1.8;
      white-space: pre-wrap;
    }

    .content-hashtags {
      padding: 14px 20px;
      background: rgba(201,169,98,0.08);
      border-top: 1px solid var(--border);
      font-size: 13px;
      color: var(--gold);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    .hashtags-text { flex: 1; word-break: break-word; }

    .copy-all-btn {
      width: 100%;
      padding: 16px;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px;
      color: var(--text-secondary);
      gap: 12px;
    }

    .spinner {
      width: 24px;
      height: 24px;
      border: 2px solid var(--border);
      border-top-color: var(--gold);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .toast {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: var(--green);
      color: #000;
      padding: 12px 20px;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.3s;
      z-index: 1000;
    }

    .toast.show { opacity: 1; transform: translateY(0); }

    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="logo">
        <div class="logo-mark">S</div>
        <div class="logo-text">Stitch <span>Intelligence</span></div>
      </div>
      <div class="header-actions">
        <div class="status-badge">
          <span class="status-dot"></span>
          Ready - No API needed
        </div>
        <button class="btn" id="btnRefresh">‚Üª Refresh</button>
      </div>
    </header>

    <div class="main">
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-title">Trending Topics</div>
          <div class="category-tabs">
            <button class="cat-tab active" data-cat="all">All</button>
            <button class="cat-tab" data-cat="fashion">Fashion</button>
            <button class="cat-tab" data-cat="watches">Watches</button>
            <button class="cat-tab" data-cat="lifestyle">Lifestyle</button>
            <button class="cat-tab" data-cat="style">Style Icons</button>
          </div>
        </div>
        <div class="topics-list" id="topicsList">
          <div class="loading"><div class="spinner"></div><span>Loading trends...</span></div>
        </div>
      </div>

      <div class="content-panel">
        <div class="content-header">
          <div class="platform-tabs">
            <button class="platform-tab active" data-platform="linkedin">üíº LinkedIn</button>
            <button class="platform-tab" data-platform="instagram">üì∏ Instagram</button>
            <button class="platform-tab" data-platform="facebook">üë• Facebook</button>
            <button class="platform-tab" data-platform="blog">üìù Blog</button>
          </div>
        </div>
        <div class="content-body" id="contentBody">
          <div class="empty-state">
            <div class="empty-icon">‚ú®</div>
            <div class="empty-text">Select a trending topic</div>
            <div class="empty-hint">Content generates instantly</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    const state = {
      topics: [],
      selectedTopic: null,
      platform: 'linkedin',
      content: {},
      category: 'all'
    };

    const CATEGORY_LABELS = {
      fashion: 'üëî Fashion',
      watches: '‚åö Watches',
      lifestyle: 'üöó Lifestyle',
      style: '‚≠ê Style Icons'
    };

    // Dynamic content generators
    const CONTENT_GENERATORS = {
      linkedin: (topic, cat) => {
        const hooks = [
          `The conversation around ${topic.toLowerCase()} is shifting.`,
          `Here's what the industry isn't talking about: ${topic}`,
          `${topic} ‚Äî and why it matters for your personal brand.`,
          `I've been researching ${topic.toLowerCase()}. Here's what stands out.`,
          `The intersection of style and success: ${topic}`
        ];
        const hook = hooks[Math.floor(Math.random() * hooks.length)];

        const insights = [
          "‚úÖ Quality craftsmanship signals attention to detail",
          "‚úÖ First impressions in business are formed in seconds",
          "‚úÖ Personal style reflects professional standards",
          "‚úÖ Investment pieces outperform fast fashion long-term",
          "‚úÖ The details separate good from exceptional"
        ];
        const selectedInsights = insights.sort(() => 0.5 - Math.random()).slice(0, 3);

        const ctas = [
          "What's your take on this trend?",
          "How does this align with your professional image?",
          "Curious to hear your thoughts below üëá",
          "Is this something you've noticed in your industry?",
          "Share your perspective in the comments."
        ];
        const cta = ctas[Math.floor(Math.random() * ctas.length)];

        return {
          text: `${hook}\n\nIn the world of men's style, this represents more than aesthetics ‚Äî it's about the message you send before you speak.\n\n${selectedInsights.join('\n')}\n\nWhether you're in the boardroom or building relationships, these details matter.\n\n${cta}`,
          hashtags: '#MensStyle #ProfessionalImage #PersonalBranding #ExecutivePresence #Menswear'
        };
      },

      instagram: (topic, cat) => {
        const openers = [
          `${topic} ‚ú®`,
          `This is what we're talking about üî•`,
          `Style update: ${topic}`,
          `The details matter üëÄ`,
          `Elevate your game üìà`
        ];
        const opener = openers[Math.floor(Math.random() * openers.length)];

        const bodies = [
          "When craftsmanship meets confidence.\n\nEvery detail tells a story ‚Üí",
          "This is what separates good from exceptional.\n\nThe difference is in the details ‚Üí",
          "Style isn't just what you wear.\nIt's how you show up. ‚ú®",
          "Quality never goes out of style.\n\nInvest in pieces that last ‚Üí"
        ];
        const body = bodies[Math.floor(Math.random() * bodies.length)];

        const closes = [
          "Save this for inspiration üìå",
          "Double tap if you agree üëä",
          "Tag someone who needs to see this",
          "Which detail catches your eye?",
          "Your move üéØ"
        ];
        const close = closes[Math.floor(Math.random() * closes.length)];

        return {
          text: `${opener}\n\n${body}\n\n${close}`,
          hashtags: '#MensStyle #Menswear #LuxuryLifestyle #GentlemanStyle #BespokeStyle #Dapper #StyleInspo #MensFashion #LuxuryFashion #ClassicStyle #Tailoring #SuitStyle #WellDressed #Elegance #Sartorial #MensWear #StyleTips #FashionMen #LuxuryMenswear #Refined'
        };
      },

      facebook: (topic, cat) => {
        const intros = [
          `Interesting trend I've been following: ${topic}`,
          `Something worth discussing: ${topic}`,
          `${topic} ‚Äî what do you all think?`,
          `Came across this and had to share: ${topic}`
        ];
        const intro = intros[Math.floor(Math.random() * intros.length)];

        const middles = [
          "It's fascinating how the small details in men's style can make such a significant impact on perception. Whether it's the cut of a jacket, the quality of a timepiece, or the shine of well-maintained shoes ‚Äî these elements communicate something beyond words.",
          "There's something to be said about investing in quality over quantity. The pieces that last, that age well, that tell a story ‚Äî those are the ones worth considering.",
          "What strikes me most is how timeless style principles continue to hold true, even as trends come and go. The fundamentals of fit, quality, and attention to detail remain constant."
        ];
        const middle = middles[Math.floor(Math.random() * middles.length)];

        const closes = [
          "What's been your experience with this? Would love to hear different perspectives!",
          "Anyone else noticing this trend? Share your thoughts below!",
          "Curious what this community thinks. Drop a comment! üëá",
          "Feel free to share if this resonates with you."
        ];
        const close = closes[Math.floor(Math.random() * closes.length)];

        return {
          text: `${intro}\n\n${middle}\n\n${close}`,
          hashtags: '#MensStyle #Fashion #Lifestyle'
        };
      },

      blog: (topic, cat) => {
        const title = topic.includes(':') ? topic : `${topic}: A Modern Gentleman's Perspective`;

        return {
          text: `# ${title}

## The Evolution of Men's Style

In today's world, ${topic.toLowerCase()} represents more than a passing trend ‚Äî it reflects a broader shift in how modern professionals approach personal presentation.

The discerning gentleman understands that every detail contributes to the overall impression. From the boardroom to social gatherings, these choices communicate competence, attention to detail, and respect for oneself and others.

## Why This Matters

**Quality Over Quantity**
The most well-dressed men aren't those with overflowing closets, but those who curate carefully. Each piece should serve a purpose and stand the test of time.

**The Details Tell the Story**
A well-fitted jacket, properly maintained shoes, a timepiece that reflects your values ‚Äî these aren't vanity. They're tools of communication.

**Investment Thinking**
Consider the cost-per-wear. A bespoke suit worn for decades outvalues dozens of disposable alternatives.

## Moving Forward

As you consider your own approach to style, remember: authenticity trumps trends. Find what works for your lifestyle, your profession, and your personality.

The goal isn't to follow fashion ‚Äî it's to develop a personal style that serves your ambitions.

*What aspects of this resonate with your own style journey? We'd love to hear from you.*`,
          hashtags: '#MensStyle #BespokeStyle #Menswear #GentlemanStyle #StyleGuide'
        };
      }
    };

    // Fetch trending topics
    async function fetchGoogleNews(query, category) {
      const results = [];
      try {
        const url = `https://news.google.com/rss/search?q=${encodeURIComponent(query)}&hl=en-US&gl=US&ceid=US:en`;
        const res = await fetch(`https://corsproxy.io/?${encodeURIComponent(url)}`);
        if (res.ok) {
          const text = await res.text();
          const parser = new DOMParser();
          const xml = parser.parseFromString(text, 'text/xml');
          xml.querySelectorAll('item').forEach((item, i) => {
            if (i < 2) {
              const title = (item.querySelector('title')?.textContent || '').replace(/ - .*$/, '');
              if (title.length > 20) {
                results.push({ title, category, source: 'Google News', time: 'Today' });
              }
            }
          });
        }
      } catch (e) {}
      return results;
    }

    async function fetchReddit(subreddit, category) {
      const results = [];
      try {
        const res = await fetch(`https://www.reddit.com/r/${subreddit}/hot.json?limit=3`);
        if (res.ok) {
          const data = await res.json();
          data.data.children.forEach(post => {
            if (!post.data.stickied && post.data.title.length > 20) {
              results.push({
                title: post.data.title,
                category,
                source: `r/${subreddit}`,
                time: 'Trending',
                score: post.data.score
              });
            }
          });
        }
      } catch (e) {}
      return results;
    }

    async function fetchAllTopics() {
      const fetches = [
        fetchGoogleNews('mens fashion trends', 'fashion'),
        fetchGoogleNews('luxury watches Rolex Omega', 'watches'),
        fetchGoogleNews('luxury cars lifestyle', 'lifestyle'),
        fetchGoogleNews('celebrity mens style', 'style'),
        fetchReddit('malefashionadvice', 'fashion'),
        fetchReddit('Watches', 'watches'),
        fetchReddit('cars', 'lifestyle')
      ];

      const results = await Promise.all(fetches);
      const all = results.flat();

      const seen = new Set();
      const unique = all.filter(t => {
        const key = t.title.toLowerCase().slice(0, 30);
        if (seen.has(key)) return false;
        seen.add(key);
        return true;
      });

      unique.sort((a, b) => (b.score || 50) - (a.score || 50));

      if (unique.length < 5) {
        unique.push(
          { title: "The Art of the Perfect Suit Fit in 2024", category: "fashion", source: "Editorial", time: "Featured" },
          { title: "Rolex vs Omega: The Ultimate Comparison", category: "watches", source: "Editorial", time: "Featured" },
          { title: "Why Executives Are Returning to Classic Style", category: "style", source: "Editorial", time: "Featured" },
          { title: "The Gentleman's Guide to Luxury Accessories", category: "lifestyle", source: "Editorial", time: "Featured" }
        );
      }

      return unique.slice(0, 12);
    }

    function renderTopics() {
      const list = document.getElementById('topicsList');
      let topics = state.topics;

      if (state.category !== 'all') {
        topics = topics.filter(t => t.category === state.category);
      }

      if (topics.length === 0) {
        list.innerHTML = `<div class="empty-state" style="padding:40px;"><div class="empty-hint">No topics in this category</div></div>`;
        return;
      }

      list.innerHTML = topics.map((t, i) => `
        <div class="topic-card ${state.selectedTopic === i ? 'selected' : ''}" data-index="${i}">
          <div class="topic-category">${CATEGORY_LABELS[t.category] || t.category}</div>
          <div class="topic-title">${t.title}</div>
          <div class="topic-meta">
            <span class="topic-source">${t.source}</span>
            <span>${t.time}</span>
          </div>
        </div>
      `).join('');

      list.querySelectorAll('.topic-card').forEach(card => {
        card.onclick = () => selectTopic(parseInt(card.dataset.index));
      });
    }

    function selectTopic(index) {
      state.selectedTopic = index;
      const topic = state.topics[index];

      // Generate content for all platforms
      state.content = {
        linkedin: CONTENT_GENERATORS.linkedin(topic.title, topic.category),
        instagram: CONTENT_GENERATORS.instagram(topic.title, topic.category),
        facebook: CONTENT_GENERATORS.facebook(topic.title, topic.category),
        blog: CONTENT_GENERATORS.blog(topic.title, topic.category)
      };

      renderTopics();
      renderContent();
    }

    function renderContent() {
      const content = state.content[state.platform];
      if (!content) return;

      const names = {
        linkedin: 'üíº LinkedIn Post',
        instagram: 'üì∏ Instagram Caption',
        facebook: 'üë• Facebook Post',
        blog: 'üìù Blog Article'
      };

      document.getElementById('contentBody').innerHTML = `
        <div class="content-card">
          <div class="content-card-header">
            <span class="card-label">${names[state.platform]}</span>
            <button class="btn" onclick="copyText()">üìã Copy</button>
          </div>
          <div class="content-text">${content.text}</div>
          <div class="content-hashtags">
            <span class="hashtags-text">${content.hashtags}</span>
            <button class="btn" onclick="copyHashtags()">üìã</button>
          </div>
        </div>
        <button class="btn btn-gold copy-all-btn" onclick="copyAll()">
          üìã Copy Everything ‚Äî Ready to Post
        </button>
      `;
    }

    function copyText() {
      const c = state.content[state.platform];
      if (c?.text) { navigator.clipboard.writeText(c.text); showToast('Text copied!'); }
    }

    function copyHashtags() {
      const c = state.content[state.platform];
      if (c?.hashtags) { navigator.clipboard.writeText(c.hashtags); showToast('Hashtags copied!'); }
    }

    function copyAll() {
      const c = state.content[state.platform];
      if (c) {
        navigator.clipboard.writeText(c.text + '\n\n' + c.hashtags);
        showToast('Copied to clipboard!');
      }
    }

    function showToast(msg) {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.add('show');
      setTimeout(() => t.classList.remove('show'), 2500);
    }

    async function refresh() {
      document.getElementById('topicsList').innerHTML = '<div class="loading"><div class="spinner"></div><span>Loading...</span></div>';
      state.topics = await fetchAllTopics();
      state.selectedTopic = null;
      state.content = {};
      renderTopics();
      document.getElementById('contentBody').innerHTML = `<div class="empty-state"><div class="empty-icon">‚ú®</div><div class="empty-text">Select a trending topic</div></div>`;
    }

    document.addEventListener('DOMContentLoaded', () => {
      refresh();

      document.getElementById('btnRefresh').onclick = refresh;

      document.querySelectorAll('.cat-tab').forEach(tab => {
        tab.onclick = () => {
          document.querySelectorAll('.cat-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          state.category = tab.dataset.cat;
          renderTopics();
        };
      });

      document.querySelectorAll('.platform-tab').forEach(tab => {
        tab.onclick = () => {
          document.querySelectorAll('.platform-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          state.platform = tab.dataset.platform;
          if (Object.keys(state.content).length > 0) renderContent();
        };
      });
    });
  </script>
</body>
</html>
